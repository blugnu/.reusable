name: ModuleRelease
on:
  workflow_call:
   
jobs:
  module-qa:
    uses: ./.github/workflows/module-qa.yml
    secrets: inherit

  release:
    needs:
      - module-qa
    uses: ./.github/workflows/release.yml
    with:
      version: ${{ needs.module-qa.outputs.semver }}
      createRelease: ${{ (github.ref == 'refs/heads/master') }}
      createTag: ${{ !fromJSON(needs.module-qa.outputs.isTagged) }}
    secrets: inherit
